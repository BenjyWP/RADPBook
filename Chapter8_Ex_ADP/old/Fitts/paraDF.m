%para.m

tau=0.05;
m1=2;
m2=2;
d11=0;
d12=13;
d21=-13;
d22=0;

c1=.15/2;
c2=.05/2;
dt=0.005;

in=0;

A0=[0 0 1        0      0      0;
   0 0 0        1      0      0;
   0 0 0        0     1/m1    0;
   0 0 0        0      0      1/m2;
   0 0 0        0      -1/tau 0;
   0 0 0        0      0      -1/tau];


% A=A0+[0 0 0     0      0 0;
%       0 0 0     0      0 0;
%       0 0 d11/m1 d12/m1      0 0;
%       0 0 d21/m2 d22/m2      0 0;
%       0 0 0     0      0 0;
%       0 0 0     0      0 0];


A=A0+[0         0 0     0      0 0;
      0         0 0     0      0 0;
      150/m1    0 0     0      0 0;
      0         0 0     0      0 0;
      0         0 0     0      0 0;
      0         0 0     0      0 0];

B=[0 0;
   0 0;
   0 0;
   0 0;
   1/tau 0;
   0 1/tau];

%%

%Q=100*diag([100,100,10,10,0,0]);R=diag([.1,.1]);

Q=10*diag([50,100,2,2,0.001,0.001]);R=diag([.01,.01]);
Q1=10*diag([150,110,2,2,0.001,0.001]);
%Q(1,2)=-100;
%Q(2,1)=Q(1,2);
%Q(3,4)=-1;
%Q(4,3)=-1;
%Q1=10*diag([150,110,2,2,0.001,0.001]);%R=diag([.01,.01]);
%Q1(1,2)=100;
%Q1(2,1)=Q1(1,2);
%Q1(3,4)=1;
%Q1(4,3)=1;
%R(1,2)=0;
%R(2,1)=R(1,2);

%Q%=Q./10;
%R=R./10;

K=lqr(A0,B,Q,R);

Ko=lqr(A,B,Q1,R);
% K0=K;
% K0(1,1)=K(1,1)+500;%230;
% K0(2,2)=K(2,2)+300;


%K=K1
eig(A-B*K);

